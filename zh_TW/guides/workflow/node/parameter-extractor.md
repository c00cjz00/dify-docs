# 參數提取

### 定義

利用 LLM 從自然語言推理並提取結構化參數，用於後置的工具調用或 HTTP 請求。

Dify 工作流內提供了豐富的[工具](https://docs.dify.ai/v/zh-hans/guides/tools)選擇，其中大多數工具的輸入為結構化參數，參數提取器可以將用戶的自然語言轉換為工具可識別的參數，方便工具調用。

工作流內的部分節點有特定的數據格式傳入要求，如[迭代](iteration.md#id-1-ding-yi)節點的輸入要求為數組格式，參數提取器可以方便的實現[結構化參數的轉換](iteration.md#id-2-chang-jing)。

***

### 場景

1. **從自然語言中提供工具所需的關鍵參數提取**，如構建一個簡單的對話式 Arxiv 論文檢索應用。

在該示例中：Arxiv 論文檢索工具的輸入參數要求為 **論文作者** 或 **論文編號**，參數提取器從問題“這篇論文中講了什麼內容：2405.10739”中提取出論文編號 **2405.10739**，並作為工具參數進行精確查詢。

<figure><img src="../../../.gitbook/assets/image (66).png" alt=""><figcaption><p>Arxiv 論文檢索工具</p></figcaption></figure>

2. **將文本轉換為結構化數據**，如長故事迭代生成應用中，作為[迭代節點](iteration.md)的前置步驟，將文本格式的章節內容轉換為數組格式，方便迭代節點進行多輪生成處理。

<figure><img src="../../../.gitbook/assets/image (67).png" alt=""><figcaption></figcaption></figure>

3. **提取結構化數據並使用** [**HTTP 請求**](http-request.md) ，可請求任意可訪問的 URL ，適用於獲取外部檢索結果、webhook、生成圖片等情景。

***

### 3 如何配置

<figure><img src="../../../.gitbook/assets/image (69).png" alt="" width="375"><figcaption></figcaption></figure>

**配置步驟**

1. 選擇輸入變量，一般為用於提取參數的變量輸入。輸入變量支持 file
2. 選擇模型，參數提取器的提取依靠的是 LLM 的推理和結構化生成能力
3. 定義提取參數，可以手動添加需要提取的參數，也可以**從已有工具中快捷導入**
4. 編寫指令，在提取複雜的參數時，編寫示例可以幫助 LLM 提升生成的效果和穩定性

**高級設置**

**推理模式**

部分模型同時支持兩種推理模式，通過函數/工具調用或是純提示詞的方式實現參數提取，在指令遵循能力上有所差別。例如某些模型在函數調用效果欠佳的情況下可以切換成提示詞推理。

* Function Call/Tool Call
* Prompt

**記憶**

開啟記憶後問題分類器的每次輸入將包含對話中的聊天曆史，以幫助 LLM 理解上文，提高對話交互中的問題理解能力。

**圖片**

開啟圖片



**輸出變量**

* 提取定義的變量
* 節點內置變量

`__is_success Number 提取是否成功` 成功時值為 1，失敗時值為 0。

`__reason String` 提取錯誤原因
