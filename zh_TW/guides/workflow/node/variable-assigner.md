# 變量聚合

### 定義

將多路分支的變量聚合為一個變量，以實現下游節點統一配置。

變量聚合節點（原變量賦值節點）是工作流程中的一個關鍵節點，它負責整合不同分支的輸出結果，確保無論哪個分支被執行，其結果都能通過一個統一的變量來引用和訪問。這在多分支的情況下非常有用，可將不同分支下相同作用的變量映射為一個輸出變量，避免下游節點重複定義。

***

### 場景

通過變量聚合，可以將諸如問題分類或條件分支等多路輸出聚合為單路，供流程下游的節點使用和操作，簡化了數據流的管理。

**問題分類後的多路聚合**

未添加變量聚合，分類1 和 分類 2 分支經不同的知識庫檢索後需要重複定義下游的 LLM 和直接回復節點。

<figure><img src="../../../.gitbook/assets/image (278).png" alt=""><figcaption><p>問題分類（無變量聚合）</p></figcaption></figure>

添加變量聚合，可以將兩個知識檢索節點的輸出聚合為一個變量。

<figure><img src="../../../.gitbook/assets/image (276).png" alt=""><figcaption><p>問題分類後的多路聚合</p></figcaption></figure>

**IF/ELSE 條件分支後的多路聚合**

<figure><img src="../../../.gitbook/assets/image (277).png" alt=""><figcaption><p>問題分類後的多路聚合</p></figcaption></figure>

### 格式要求

變量聚合器支持聚合多種數據類型，包括字符串（`String`）、數字（`Number`）、文件（`File`）對象（`Object`）以及數組（`Array`）

**變量聚合器只能聚合同一種數據類型的變量**。若第一個添加至變量聚合節點內的變量數據格式為 `String`，後續連線時會自動過濾可添加變量為 `String` 類型。

**聚合分組**

開啟聚合分組後，變量聚合器可以聚合多組變量，各組內聚合時要求同一種數據類型。
